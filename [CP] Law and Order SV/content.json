{
    "Format": "2.4.0",
    //with each update: update modmail in data/mail
    "ConfigSchema": {
        //General options
        "cfgJailOpenDelay": {
            "AllowValues": "2, 15, 30, 40",
            "Default": "40",
            "Section": "general"
        },
        "cfgModAuthorMail": {
            "AllowValues": "true, false",
            "Default": "true",
            "Section": "general"
        },
        "cfgShrineOfJustice": {
            "AllowValues": "true, false",
            "Default": "true",
            "Section": "general"
        },
        "cfgSpork": {
            "Default": "Spork",
            "Section": "general"
        },
        "cfgRipley": {
            "Default": "Ripley",
            "Section": "general"
        },
        "cfgJailMusic": {
            "AllowValues": "DetectiveStories, ModernDramedy, none",
            "Default": "DetectiveStories",
            "Section": "general"
        },
        "cfgPortraits": {
            "AllowValues": "original, plasmoasis",
            "Default": "plasmoasis",
            "Section": "general"
        },
        //Jailable characters
        "cfgJailClint": {
            "AllowValues": "true, false",
            "Default": "true",
            "Section": "jailable"
        },
        "cfgJailLewis": {
            "AllowValues": "true, false",
            "Default": "true",
            "Section": "jailable"
        },
        "cfgJailPam": {
            "AllowValues": "true, false",
            "Default": "true",
            "Section": "jailable"
        },
        "cfgJailPierre": {
            "AllowValues": "true, false",
            "Default": "true",
            "Section": "jailable"
        },
        "cfgJailMorris": {
            "AllowValues": "true, false",
            "Default": "true",
            "Section": "jailable"
        },
        "cfgJailFarmer": {
            "AllowValues": "true, false",
            "Default": "true",
            "Section": "jailable"
        },

        //farmer crimes section
        "cfgConflictRussellShannon": {
            "AllowValues": "true, false",
            "Default": "true",
            "Section": "farmerCrimes"
        }
    },
    "DynamicTokens": [
        {
            "Name": "Russell",
            "Value": "{{ModId}}_Russell"
        },
        {
            "Name": "Shannon",
            "Value": "{{ModId}}_Shannon"
        },
        {
            "Name": "Spork",
            "Value": "{{ModId}}_Spork"
        },
        {
            "Name": "Ripley",
            "Value": "{{ModId}}_Ripley"
        },
        {
            "Name": "LOMorris",
            "Value": "{{ModId}}_Morris"
        },
        {
            "Name": "MorrisVariant",
            "Value": "{{ModId}}_Morris"
        },
        {
            "Name":"MorrisVariant",
            "Value":"MorrisTod",
            "When": {"HasSeenEvent |contains=191393": "false", "HasMod |contains=FlashShifter.StardewValleyExpandedCP": "true"},
        },
        {
            "Name": "russell_sleep",
            "Value": "sdvhead.lawandordersv_russell_sleep"
        },
        {
            "Name": "shannon_sleep",
            "Value": "sdvhead.lawandordersv_shannon_sleep"
        },
        {
            "Name": "spork_sleep",
            "Value": "sdvhead.lawandordersv_spork_sleep"
        },
        {
            "Name": "ripley_sleep",
            "Value": "sdvhead.lawandordersv_ripley_sleep"
        },
        {
            "Name": "ShannonStyle",
            "Value": "Ruby"
        },
        {
            "Name": "ShannonStyle",
            "Value": "Espresso",
            "When": {
                "HasConversationTopic": "{{ModId}}_ShannonHairCT_Espresso"
            }
        },
        {
            "Name": "ShannonStyle",
            "Value": "Ocean",
            "When": {
                "HasConversationTopic": "{{ModId}}_ShannonHairCT_Ocean"
            }
        },
        {
            "Name": "ShannonStyle",
            "Value": "BubbleGum",
            "When": {
                "HasConversationTopic": "{{ModId}}_ShannonHairCT_BubbleGum"
            }
        },
        {
            "Name":"JailTerm_2w",
            "Value":"14"
        },
        {
            "Name":"JailTerm_2wplus",
            "Value":"15"
        },
        {
            "Name":"JailTerm_3w",
            "Value":"21"
        },
        {
            "Name":"JailTerm_3wplus",
            "Value":"22"
        },
        {
            "Name":"JailTerm_1s",
            "Value":"28"
        },
        {
            "Name":"JailTerm_1splus",
            "Value":"29"
        },
        {
            "Name":"JailTerm_6w",
            "Value":"42"
        },
        {
            "Name":"JailTerm_6wplus",
            "Value":"43"
        },
        {
            "Name":"JailTerm_2s",
            "Value":"56"
        },
        {
            "Name":"JailTerm_2splus",
            "Value":"57"
        },
        {
            "Name":"JailTerm_12w",
            "Value":"84"
        },
        {
            "Name":"JailTerm_12wplus",
            "Value":"85"
        },
        {//a bit under a year to make sure the lewis festival reset is available
            "Name":"JailTerm_1y",
            "Value":"110"
        },
        {
            "Name":"JailTerm_1yplus",
            "Value":"111"
        },
        {
            "Name":"JailTerm_6s",
            "Value":"168"
        },
        {
            "Name":"JailTerm_6splus",
            "Value":"169"
        },
        {
            "Name": "Prisoner1",
            "Value": "Clint",
            "When":{
                "cfgJailClint": true,
                "HasConversationTopic |contains={{ModId}}_ClintInJail, {{ModId}}_ClintRepeatJail": "true"
            }
         },
         {
            "Name": "Prisoner1_SleepFrame",
            "Value": "43",
            "When":{
               "cfgJailClint": true,
               "HasConversationTopic |contains={{ModId}}_ClintInJail, {{ModId}}_ClintRepeatJail": "true"
            }
         },
        {
            "Name": "Prisoner1",
            "Value": "Pierre",
            "When":{
                "cfgJailPierre": true,
                "HasConversationTopic": "{{ModId}}_PierreInJail"
            }
         },
         {
             "Name": "Prisoner1_SleepFrame",
             "Value": "24",
             "When":{
                "cfgJailPierre": true,
                "HasConversationTopic": "{{ModId}}_PierreInJail"
             }
          },
          {
            "Name": "Prisoner1",
            "Value": "{{MorrisVariant}}",
            "When":{
                "cfgJailMorris": true,
                "HasConversationTopic": "{{ModId}}_MorrisInJail",
            }
         },
         {
             "Name": "Prisoner1_SleepFrame",
             "Value": "8",
             "When":{
                "cfgJailMorris": true,
                "HasConversationTopic": "{{ModId}}_MorrisInJail"
             }
          },
        {
            "Name": "Prisoner2",
            "Value": "Lewis",
            "When":{
                "cfgJailLewis": true,
                "HasConversationTopic": "{{ModId}}_LewisInJail"
            }
         },
         {
             "Name": "Prisoner2_SleepFrame",
             "Value": "27",
             "When":{
                "cfgJailLewis": true,
                "HasConversationTopic": "{{ModId}}_LewisInJail"
             }
          },
          {
            "Name": "Prisoner2",
            "Value": "Pam",
            "When":{
                "cfgJailPam": true,
                "HasConversationTopic |contains={{ModId}}_PamInJail, {{ModId}}_PamRepeatJail": "true"
            }
         },
         {
             "Name": "Prisoner2_SleepFrame",
             "Value": "31",
             "When":{
                "cfgJailPam": true,
                "HasConversationTopic |contains={{ModId}}_PamInJail, {{ModId}}_PamRepeatJail": "true"
             }
          },
          {
            "Name": "ClintEventRepeatSwitch",
            "Value": "{{i18n:Events.ClintRepeatArrest.012}}",
          },
          {
            "Name": "ClintEventRepeatSwitch",
            "Value": "{{i18n:Events.ClintRepeatArrest.012.fell}}",
            "When":{
               "HasFlag: anyPlayer": "{{ModId}}_FellForPancakes",
            }
         },
         {
            "Name": "RussellBD",
            "Value": false,
         },
         {
            "Name": "RussellBD",
            "Value": true,
            "When": {"Season": "Summer","Day":"20"},
         },

         //ghostwood coordinate tokens
         {
            "Name":"gw_n1_depart",
            "Value":"19 -1"
         }, 
         {
            "Name":"gw_n2_depart",
            "Value":"20 -1"
         }, 
         {
            "Name":"gw_e1_depart",
            "Value":"40 19"
         }, 
         {
            "Name":"gw_e2_depart",
            "Value":"40 20"
         }, 
         {
            "Name":"gw_s1_depart",
            "Value":"19 40"
         }, 
         {
            "Name":"gw_s2_depart",
            "Value":"20 40"
         }, 
         {
            "Name":"gw_w1_depart",
            "Value":"-1 19"
         }, 
         {
            "Name":"gw_w2_depart",
            "Value":"-1 20"
         }, 
         {
            "Name":"gw_n1_arrive",
            "Value":"19 2"
         }, 
         {
            "Name":"gw_n2_arrive",
            "Value":"20 2"
         }, 
         {
            "Name":"gw_e1_arrive",
            "Value":"37 19"
         }, 
         {
            "Name":"gw_e2_arrive",
            "Value":"37 20"
         }, 
         {
            "Name":"gw_s1_arrive",
            "Value":"19 37"
         }, 
         {
            "Name":"gw_s2_arrive",
            "Value":"20 37"
         }, 
         {
            "Name":"gw_w1_arrive",
            "Value":"2 19"
         }, 
         {
            "Name":"gw_w2_arrive",
            "Value":"2 20"
         },

         
    ],

    "Changes": [
        {
            "Action": "Load",
            "Target": "Maps/{{ModId}}_Jail",
            "FromFile": "assets/Locations/Jail.tmx"
        },
        {
            "Action": "Load",
            "Target": "Maps/{{ModId}}_AboveJail",
            "FromFile": "assets/Locations/AboveJail.tmx"
        },
        {
            "Action": "Load",
            "Target": "Maps/{{ModId}}_PierreWarpRoom",
            "FromFile": "assets/Locations/PierreWarpRoom.tmx"
        },
        {
            "Action": "Load",
            "Target": "Maps/{{ModId}}_WarpRoom_Pam",
            "FromFile": "assets/Locations/WarpRoom_Pam.tmx"
        },
        {
            "Action": "Load",
            "Target": "Maps/{{ModId}}_WarpRoom_Clint",
            "FromFile": "assets/Locations/WarpRoom_Clint.tmx"
        },
        {
            "Action": "Load",
            "Target": "Maps/{{ModId}}_WarpRoom_Morris",
            "FromFile": "assets/Locations/WarpRoom_Morris.tmx"
        },
        // add location
        {
            "Action": "EditData",
            "Target": "Data/Locations",
            "Entries": {
                "{{ModId}}_Jail": {
                    "DisplayName": "{{i18n:location_jail}}",
                    "CreateOnLoad": {
                        "MapPath": "Maps/{{ModId}}_Jail"
                    }
                },
                "{{ModId}}_AboveJail": {
                    "DisplayName": "{{i18n:location_abovejail}}",
                    "CreateOnLoad": {
                        "MapPath": "Maps/{{ModId}}_AboveJail"
                    }
                },
                "{{ModId}}_PierreWarpRoom": {
                    "DisplayName": "{{i18n:location_pierrewarproom}}",
                    "CreateOnLoad": {
                        "MapPath": "Maps/{{ModId}}_PierreWarpRoom"
                    },
                },
                "{{ModId}}_WarpRoom_Pam": {
                    "DisplayName": "{{i18n:location_WarpRoom_Pam}}",
                    "CreateOnLoad": {
                        "MapPath": "Maps/{{ModId}}_WarpRoom_Pam"
                    },
                },
                "{{ModId}}_WarpRoom_Clint": {
                    "DisplayName": "{{i18n:location_WarpRoom_Clint}}",
                    "CreateOnLoad": {
                        "MapPath": "Maps/{{ModId}}_WarpRoom_Clint"
                    },
                },
                "{{ModId}}_WarpRoom_Morris": {
                    "DisplayName": "{{i18n:location_WarpRoom_Morris}}",
                    "CreateOnLoad": {
                        "MapPath": "Maps/{{ModId}}_WarpRoom_Morris"
                    },
                },
            }
        },
        {
            "Action": "EditData",
            "Target": "Data/Locations",
            "Fields": {
                "{{ModId}}_Jail": {
                    "MusicDefault": "{{ModId}}_{{cfgJailMusic}}",
                },
                "{{ModId}}_AboveJail": {
                    "MusicDefault": "{{ModId}}_{{cfgJailMusic}}",
                },
            },
            "When":{
                "cfgJailMusic|contains=none": "false"
            }
        },
        {
            //add the shrine of justice to the witch hut
            "Action": "EditMap",
            "Target": "Maps/WitchHut",
            "FromFile": "assets/Locations/WitchHutPatch.tmx",
            "FromArea": {
                "X": 4,
                "Y": 3,
                "Width": 7,
                "Height": 4
            },
            "ToArea": {
                "X": 4,
                "Y": 3,
                "Width": 7,
                "Height": 4
            },
            "When":{
                "cfgShrineOfJustice":true,
            }
        },
        {
            //activate the shrine of justice when eligible
            "Action": "EditMap",
            "Target": "Maps/WitchHut",
            "MapTiles": [
                {
                    "Position": { "X": 9, "Y": 5 },
                    "Layer": "Buildings",
                    "SetProperties": {"Action":"PlayEvent sdvlao_shrineofjustice false false"}
                },
            ],
            "When": {
                "cfgShrineOfJustice":true,
                "Hearts:{{Russell}}": "{{Range: 2, 14}}",
                "Hearts:{{Shannon}}": "{{Range: 2, 14}}",
                "HasConversationTopic |contains={{ModId}}_PrisonBed1, {{ModId}}_PrisonBed2, {{ModId}}_ClintHouseArrest": "true"
            },
            "Update": "OnLocationChange"
        },
        {
            "Action": "EditMap",
            "Target": "Maps/Town",
            "FromFile": "assets/Locations/SheriffClosed.tmx",
            "ToArea": {
                "X": 70,
                "Y": 0,
                "Width": 8,
                "Height": 9
            }
        },
        {
            "Action": "EditMap",
            "Target": "Maps/Town",
            "FromFile": "assets/Locations/Sheriff_fixup.tmx",
            "ToArea": {
                "X": 70,
                "Y": 0,
                "Width": 8,
                "Height": 9
            },
            "When": {
                //becomes available starting Summer 12 (day after luau)
                "query: {{DaysPlayed}} >= {{cfgJailOpenDelay}}": true,
                "HasSeenEvent |contains=239792002": false,
            },
            "Update": "OnLocationChange"
        },




        //partial fixup
        {
            "Action": "EditMap",
            "Target": "Maps/Town",
            "FromFile": "assets/Locations/Sheriff_duringfixup.tmx",
            "ToArea": {
                "X": 70,
                "Y": 0,
                "Width": 8,
                "Height": 9
            },
            "When": {
                "HasConversationTopic": "{{ModId}}_JailFixup"
            },
            "Update": "OnLocationChange"
        },
        //fully open the Sheriff's office after seeing fixup event
        {
            "Action": "EditMap",
            "Target": "Maps/Town",
            "FromFile": "assets/Locations/Sheriff.tmx",
            "ToArea": {
                "X": 70,
                "Y": 0,
                "Width": 8,
                "Height": 9
            },
            "When": {
                "HasSeenEvent": "239792002" //fixup event
            },
        },
        {
            //light the completed building
            "Action": "EditMap",
            "Target": "Maps/Town",
            "TextOperations": [
                {
                    "Operation": "Append",
                    "Target": [
                        "MapProperties",
                        "Light"
                    ],
                    "Value": "70 4 4 77 4 4 71 4 4 76 4 4",
                    "Delimiter": " "
                }
            ],
            "When": {
                "HasSeenEvent": "239792002" //fixup event
            },
        },

        //set Pierre's home to the warp room
        {
            "Action": "EditData",
            "Target": "Data/Characters",
            "Fields": {
                "Pierre": {
                    "Home": [
                        {
                            "Id": "Default",
                            "Condition": null,
                            "Location": "sdvhead.LawAndOrderSV_PierreWarpRoom",
                            "Tile": {
                                "X": 4,
                                "Y": 7
                            },
                            "Direction": "left"
                        }
                    ],
                    "CanVisitIsland":"False"
                }
            },
            "When": {
                "cfgJailPierre": true
            }
        },
        //Audio changes
        {
            "Action": "Include",
            "FromFile": "assets/Data/AudioChanges.json"
        },
        //TileData messages
        {
            "Action": "Include",
            "FromFile": "assets/Data/LocationMessages.json"
        },

        //objects
        {
            "Action": "Include",
            "FromFile": "assets/Data/objects.json"
        },
        //garbage
        {
            "Action": "Include",
            "FromFile": "assets/Data/GarbageCans.json"
        },
        //weapons
        {
            "Action": "Include",
            "FromFile": "assets/Data/Weapons.json"
        },

        //npc setup
        {
            "Action": "Load",
            "Target": "Characters/Dialogue/{{Shannon}}, Characters/schedules/{{Shannon}}, Strings/schedules/{{Shannon}}, Characters/Dialogue/MarriageDialogue{{Shannon}}",
            "FromFile": "assets/NPCs/Data/blank.json" 
        },
        {
            "Action": "Load",
            "Target": "Characters/Dialogue/{{Russell}}, Characters/schedules/{{Russell}}, Strings/schedules/{{Russell}}, Characters/Dialogue/MarriageDialogue{{Russell}}",
            "FromFile": "assets/NPCs/Data/blank.json"
        },
        //npc disposition
        {
            "Action": "Include",
            "FromFile": "assets/NPCs/Dispositions/Shannon.json"
        },
        {
            "Action": "Include",
            "FromFile": "assets/NPCs/Dispositions/Russell.json"
        },
        //npc base portraits
        {
            "Action": "Load",
            "Target": "Portraits/{{Shannon}}",
            "FromFile": "assets/NPCs/Portraits_{{cfgPortraits}}/Shannon/{{ShannonStyle}}/Shannon.png"
        },
        {
            "Action": "Load",
            "Target": "Portraits/{{Russell}}",
            "FromFile": "assets/NPCs/Portraits_{{cfgPortraits}}/Russell.png"
        },
        //npc base sprites
        {
            "Action": "Load",
            "Target": "Characters/{{Shannon}}",
            "FromFile": "assets/NPCs/Sprites/Shannon/{{ShannonStyle}}/Shannon.png"
        },
        {
            "Action": "Load",
            "Target": "Characters/{{Russell}}",
            "FromFile": "assets/NPCs/Sprites/Russell.png"
        },
        //npc gift tastes
        {
            "Action": "Include",
            "FromFile": "assets/NPCs/GiftTastes/Gifts_Shannon.json"
        },
        {
            "Action": "Include",
            "FromFile": "assets/NPCs/GiftTastes/Gifts_Russell.json"
        },
        //festivals
        {
            "Action": "Include",
            "FromFile": "assets/NPCs/Festivals/Festivals.json",
            "When": {
                "HasSeenEvent": "239792002" //fixup event
            }
        },
        //events
        {
            "Action": "Include",
            "FromFile": "assets/NPCs/Events/events.json"
        },
        //Mail 
        {
            "Action": "Include",
            "FromFile": "assets/Data/Mail.json"
        },
        //Weddings
        {
            "Action": "Include",
            "FromFile": "assets/Data/Weddings.json"
        },

        {
            //adjust the clinic
            "Action": "EditMap",
            "Target": "Maps/Hospital",
            "FromFile": "assets/Locations/Surgery.tmx",
            "FromArea": { "X": 19, "Y": 3, "Width": 4, "Height": 4 },
            "ToArea": { "X": 19, "Y": 3, "Width": 4, "Height": 4 }
        },
        //load blank events
        {
            "Action": "Load",
            "Target": "Data/Events/MovieTheater, Data/Events/sdvhead.LawAndOrderSV_Jail, Data/Events/sdvhead.LawAndOrderSV_AboveJail, Data/Events/Blacksmith, Data/Events/WitchHut, Data/Events/BathHouse_MensLocker, Data/Events/BathHouse_WomensLocker",
            "FromFile": "assets/NPCs/Data/blank.json",
            "Priority":"Low"
        },

        // load spouse rooms
        {
            "Action": "Load",
            "Target": "Maps/sdvwarhead.LawAndOrderSV_SpouseRoom",
            "FromFile": "assets/Locations/SpouseRooms.tmx"
        },
        // load spouse map
        {
            "Action": "Load",
            "Target": "Maps/sdvwarhead.LawAndOrderSV_OutsideArea",
            "FromFile": "assets/Locations/spousePatios.tmx"
        },
        //turn on the patio grill on Saturdays when Russell is outside (change MapSourceRect to use the animated area in the tiled map)
        {
            "Action": "EditData",
            "Target": "Data/Characters",
            "Fields": {
                "{{Russell}}": {
                    "SpousePatio": {
                        "MapAsset": "sdvwarhead.LawAndOrderSV_OutsideArea",
                        "MapSourceRect": {
                            "X": 4,
                            "Y": 0,
                            "Width": 4,
                            "Height": 4
                        },
						"SpriteAnimationFrames": [
							[43,16000],[36,3000],[37,120],[38,120],[39,240],[41,180],[39,180],[41,180],[39,480],[40,240],[39,240],[40,240],[39,240],[40,240],[39,240],[38,120],[37,120],[36,2400],[42,360],[36,600]
						],
						"SpriteAnimationPixelOffset": {
							"X": 0,
							"Y": 0
						}
                    }
                }
            },
            "When": {
                "DayOfWeek": "Saturday",
                "Season": "Spring, Summer, Fall",
                "Weather": "Sun, Wind",
                "RussellBD":false
            },
            "Update": "OnLocationChange"
        },

        /*
        additional custom sprite loads
        */
        {
            "Action": "Load",
            "Target": "Characters/{{Shannon}}_Beach",
            "FromFile": "assets/NPCs/Sprites/Shannon/{{ShannonStyle}}/Shannon_Beach.png"
        },
        {
            "Action": "Load",
            "Target": "Characters/{{Russell}}_Beach",
            "FromFile": "assets/NPCs/Sprites/Russell_Beach.png"
        },
        {
            "Action": "Load",
            "Target": "Portraits/{{Russell}}_Beach",
            "FromFile": "assets/NPCs/Portraits_{{cfgPortraits}}/Russell_Beach_Portrait.png"
        },
        {
            "Action": "Load",
            "Target": "Characters/{{Russell}}_SpiritsEve",
            "FromFile": "assets/NPCs/Sprites/Russell_SpiritsEve.png"
        },
        {
            "Action": "Load",
            "Target": "Portraits/{{Russell}}_SpiritsEve",
            "FromFile": "assets/NPCs/Portraits_{{cfgPortraits}}/Russell_SpiritsEve_Portrait.png"
        },
        {
            "Action": "Load",
            "Target": "Characters/{{Shannon}}_SpiritsEve",
            "FromFile": "assets/NPCs/Sprites/Shannon/Shannon_SpiritsEve.png"
        },
        {
            "Action": "Load",
            "Target": "Portraits/{{Shannon}}_SpiritsEve",
            "FromFile": "assets/NPCs/Portraits_{{cfgPortraits}}/Shannon/Shannon_SpiritsEve_Portrait.png"
        },
        {
            "Action": "Load",
            "Target": "Portraits/{{Shannon}}_Beach",
            "FromFile": "assets/NPCs/Portraits_{{cfgPortraits}}/Shannon/{{ShannonStyle}}/Shannon_Beach_Portrait.png"
        },
        {
            "Action": "Load",
            "Target": "Characters/Vincent_Police",
            "FromFile": "assets/NPCs/Sprites/Vincent_Police.png"
        },
        {
            "Action": "Load",
            "Target": "Portraits/Vincent_Police",
            "FromFile": "assets/NPCs/Portraits_{{cfgPortraits}}/Vincent_Police_Portrait.png"
        },
        {
            "Action": "Load",
            "Target": "Characters/{{Shannon}}_Red",
            "FromFile": "assets/NPCs/Sprites/Shannon/Shannon_Red.png"
        },
        {
            "Action": "Load",
            "Target": "Portraits/{{Shannon}}_Red",
            "FromFile": "assets/NPCs/Portraits_{{cfgPortraits}}/Shannon/Shannon_Red_Portrait.png"
        },
        {
            "Action": "Load",
            "Target": "Characters/{{Shannon}}_Hatless",
            "FromFile": "assets/NPCs/Sprites/Shannon/{{ShannonStyle}}/Shannon_Hatless.png"
        },
        {
            "Action": "Load",
            "Target": "Portraits/{{Shannon}}_Hatless",
            "FromFile": "assets/NPCs/Portraits_{{cfgPortraits}}/Shannon/{{ShannonStyle}}/Shannon_Hatless_Portrait.png"
        },
        {
            "Action": "Load",
            "Target": "Characters/{{Russell}}_Prosthetic",
            "FromFile": "assets/NPCs/Sprites/Russell_Prosthetic.png"
        },
        {
            "Action": "Load",
            "Target": "Portraits/{{Russell}}_Prosthetic",
            "FromFile": "assets/NPCs/Portraits_{{cfgPortraits}}/Russell_Prosthetic_Portrait.png"
        },
        {
            "Action": "Load",
            "Target": "Characters/{{Russell}}_ProstheticBeach",
            "FromFile": "assets/NPCs/Sprites/Russell_Beach_Prosthetic.png"
        },
        {
            "Action": "Load",
            "Target": "Portraits/{{Russell}}_ProstheticBeach",
            "FromFile": "assets/NPCs/Portraits_{{cfgPortraits}}/Russell_Prosthetic_Beach_Portrait.png"
        },


        //add the NPC schedules and events if fixup event is seen
        {
            "Action": "Include",
            "FromFile": "assets/NPCs/Schedules/Schedule_Shannon.json",
            "When": {
                "HasSeenEvent": "239792002"
            }
        },
        {
            "Action": "Include",
            "FromFile": "assets/NPCs/Schedules/Schedule_Russell.json",
            "When": {
                "HasSeenEvent": "239792002"
            }
        }, 
        {
            "Action": "Include",
            "FromFile": "assets/NPCs/Events/Events_Shannon.json"
        },
        {
          "Action": "Include",
          "FromFile": "assets/NPCs/Events/Events_Russell.json"
        },
        {
            "Action": "Include",
            "FromFile": "assets/NPCs/Schedules/Strings_Schedules_Russell.json"
        },
        {
            "Action": "Include",
            "FromFile": "assets/NPCs/Schedules/Strings_Schedules_Shannon.json"
        },
        {
            "Action": "Include",
            "FromFile": "assets/NPCs/Data/animationDescriptions.json"
        },

        {
            "Action": "Include",
            "FromFile": "assets/Data/Shops.json"
        },
        //test to remove crane man
        /*
        {
            "Action": "EditMap",
            "Target": "Maps/MovieTheater",
            "Update": "OnLocationChange",
            "MapTiles": [
                {
                    "Position": { "X": 2, "Y": 8 },
                    "Layer": "Front",
                    "Remove":true,
                },
                {
                    "Position": { "X": 2, "Y": 9 },
                    "Layer": "Buildings",
                    "Passable":"T",
                },
            ],
        },
        */

        {
            "Action": "EditImage",
            "Target": "Characters/{{Shannon}}",
            "FromFile": "assets/NPCs/Sprites/Shannon/{{ShannonStyle}}/Shannon_Beach.png",
            "When": {
                "Time": "{{Range: 0710, 0750}}",
                "LocationName":"sdvhead.LawAndOrderSV_AboveJail"
            },
            "Update": "OnLocationChange, OnTimeChange"
        },
        {
            "Action": "EditImage",
            "Target": "Characters/{{Shannon}}",
            "FromFile": "assets/NPCs/Sprites/Shannon/{{ShannonStyle}}/Shannon_PJs.png",
            "When": {
                "Time": "{{Range: 0600, 0700}}",
                "LocationName":"sdvhead.LawAndOrderSV_AboveJail"
            },
            "Update": "OnLocationChange, OnTimeChange"
        },
        {
            "Action": "EditImage",
            "Target": "Characters/{{Shannon}}",
            "FromFile": "assets/NPCs/Sprites/Shannon/{{ShannonStyle}}/Shannon_PJs.png",
            "When": {
                "Time": "{{Range: 1940, 2600}}",
                "LocationName":"sdvhead.LawAndOrderSV_AboveJail"
            },
            "Update": "OnLocationChange"
        },
        {
            "Action": "EditImage",
            "Target": "Characters/{{Shannon}}",
            "FromFile": "assets/NPCs/Sprites/Shannon/{{ShannonStyle}}/Shannon_PJs.png",
            "When": {
                "Time": "{{Range: 600, 900}}",
                "LocationName":"farmHouse",
                "Relationship:{{Shannon}}": "Married"
            },
            "Update": "OnLocationChange, OnTimeChange"
        },
        {
            "Action": "EditImage",
            "Target": "Portraits/{{Shannon}}",
            "FromFile": "assets/NPCs/Portraits_{{cfgPortraits}}/Shannon/{{ShannonStyle}}/Shannon_PJ_Portrait.png",
            "When": {
                "Time": "{{Range: 600, 900}}",
                "LocationName":"farmHouse",
                "Relationship:{{Shannon}}": "Married"
            },
            "Update": "OnLocationChange, OnTimeChange"
        },
        {
            "Action": "EditImage",
            "Target": "Characters/{{Shannon}}",
            "FromFile": "assets/NPCs/Sprites/Shannon/{{ShannonStyle}}/Shannon_PJs.png",
            "When": {
                "Time": "{{Range: 2000, 2600}}",
                "LocationName":"farmHouse",
                "Relationship:{{Shannon}}": "Married"
            },
            "Update": "OnLocationChange, OnTimeChange"
        },
        {
            "Action": "EditImage",
            "Target": "Portraits/{{Shannon}}",
            "FromFile": "assets/NPCs/Portraits_{{cfgPortraits}}/Shannon/{{ShannonStyle}}/Shannon_PJ_Portrait.png",
            "When": {
                "Time": "{{Range: 2000, 2600}}",
                "LocationName":"farmHouse",
                "Relationship:{{Shannon}}": "Married"
            },
            "Update": "OnLocationChange, OnTimeChange"
        },
        {
            "Action": "EditImage",
            "Target": "Portraits/{{Shannon}}",
            "FromFile": "assets/NPCs/Portraits_{{cfgPortraits}}/Shannon/{{ShannonStyle}}/Shannon_Beach_Portrait.png",
            "When": {
                "Time": "{{Range: 0710, 0750}}",
                "LocationName":"sdvhead.LawAndOrderSV_AboveJail"
            },
            "Update": "OnLocationChange, OnTimeChange"
        },
        {
            "Action": "EditImage",
            "Target": "Portraits/{{Shannon}}",
            "FromFile": "assets/NPCs/Portraits_{{cfgPortraits}}/Shannon/{{ShannonStyle}}/Shannon_PJ_Portrait.png",
            "When": {
                "Time": "{{Range: 0600, 0700}}",
                "LocationName":"sdvhead.LawAndOrderSV_AboveJail"
            },
            "Update": "OnLocationChange, OnTimeChange"
        },
        {
            "Action": "EditImage",
            "Target": "Portraits/{{Shannon}}",
            "FromFile": "assets/NPCs/Portraits_{{cfgPortraits}}/Shannon/{{ShannonStyle}}/Shannon_PJ_Portrait.png",
            "When": {
                "Time": "{{Range: 1940, 2600}}",
                "LocationName":"sdvhead.LawAndOrderSV_AboveJail"
            },
            "Update": "OnLocationChange"
        },
        {
            "Action": "EditImage",
            "Target": "Characters/{{Russell}}",
            "FromFile": "assets/NPCs/Sprites/Russell_Beach_Prosthetic.png",
            "When": {
                "Time": "1810, 1820, 1830, 1840, 1850",
                "LocationName":"sdvhead.LawAndOrderSV_AboveJail",
                "HasSeenEvent": "239791004",
                "DayOfWeek":"Monday,Tuesday,Wednesday,Thursday,Saturday,Sunday",
            },
            "Update": "OnLocationChange, OnTimeChange"
        },
        {
            "Action": "EditImage",
            "Target": "Portraits/{{Russell}}",
            "FromFile": "assets/NPCs/Portraits_{{cfgPortraits}}/Russell_Prosthetic_Beach_Portrait.png",
            "When": {
                "Time": "1810, 1820, 1830, 1840, 1850",
                "LocationName":"sdvhead.LawAndOrderSV_AboveJail",
                "HasSeenEvent": "239791004",
                "DayOfWeek":"Monday,Tuesday,Wednesday,Thursday,Saturday,Sunday",
            },
            "Update": "OnLocationChange, OnTimeChange"
        },
        {
            "Action": "EditImage",
            "Target": "Characters/{{Russell}}",
            "FromFile": "assets/NPCs/Sprites/Russell_Beach.png",
            "When": {
                "Time": "1810, 1820, 1830, 1840, 1850",
                "LocationName":"sdvhead.LawAndOrderSV_AboveJail",
                "HasSeenEvent |contains=239791004": false,
                "DayOfWeek":"Monday,Tuesday,Wednesday,Thursday,Saturday,Sunday",
            },
            "Update": "OnLocationChange, OnTimeChange"
        },
        {
            "Action": "EditImage",
            "Target": "Portraits/{{Russell}}",
            "FromFile": "assets/NPCs/Portraits_{{cfgPortraits}}/Russell_Beach_Portrait.png",
            "When": {
                "Time": "1810, 1820, 1830, 1840, 1850",
                "LocationName":"sdvhead.LawAndOrderSV_AboveJail",
                "HasSeenEvent |contains=239791004": false,
                "DayOfWeek":"Monday,Tuesday,Wednesday,Thursday,Saturday,Sunday",
            },
            "Update": "OnLocationChange, OnTimeChange"
        },
        {
            "Action": "EditMap",
            "Target": "Maps/sdvhead.LawAndOrderSV_AboveJail",
            "FromFile": "assets/Locations/Shower.tmx",
            "ToArea": {
                "X": 18,
                "Y": 2,
                "Width": 3,
                "Height": 5
            },
            "When": {
                "Time": "720, 730, 740",
                "LocationName":"sdvhead.LawAndOrderSV_AboveJail"
            },
            "Update": "OnLocationChange, OnTimeChange"
        },
        {
            "Action": "EditMap",
            "Target": "Maps/sdvhead.LawAndOrderSV_AboveJail",
            "FromFile": "assets/Locations/Shower.tmx",
            "ToArea": {
                "X": 18,
                "Y": 2,
                "Width": 3,
                "Height": 5
            },
            "When": {
                "Time": "1820, 1830, 1840",
                "LocationName":"sdvhead.LawAndOrderSV_AboveJail",
                "DayOfWeek":"Monday,Tuesday,Wednesday,Thursday,Saturday,Sunday",
            },
            "Update": "OnLocationChange, OnTimeChange"
        },

        {
            "Action": "EditImage",
            "Target": "Characters/{{Shannon}}",
            "FromFile": "assets/NPCs/Sprites/Shannon/{{ShannonStyle}}/Shannon_Beach.png",
            "When": {
                "LocationName":"BathHouse_Pool"
            },
            "Update": "OnLocationChange"
        },
        {
            "Action": "EditImage",
            "Target": "Portraits/{{Shannon}}",
            "FromFile": "assets/NPCs/Portraits_{{cfgPortraits}}/Shannon/{{ShannonStyle}}/Shannon_Beach_Portrait.png",
            "When": {
                "LocationName":"BathHouse_Pool"
            },
            "Update": "OnLocationChange"
        },
        {
            "Action": "Include",
            "FromFile": "assets/NPCs/Dialogue/Dialogue_Shannon.json"
        },
        {
            "Action": "Include",
            "FromFile": "assets/NPCs/Dialogue/Dialogue_Russell.json"
        },
        {
            "Action": "Include",
            "FromFile": "assets/Data/Clothes.json"
        },

        {
            "Action": "Include",
            "FromFile": "assets/Data/Furniture.json"
        },
        //movie tastes
        {
            "Action": "Include",
            "FromFile": "assets/NPCs/movies.json"
        },

        //relationship-based map updates
        {
            "Action": "EditMap",
            "Target": "Maps/sdvhead.LawAndOrderSV_AboveJail",
            "MapTiles": [
                {
                    "Position": { "X": 1, "Y": 7 },
                    "Layer": "Back",
                    "SetProperties": {"TouchAction":"Sleep"}
                },
            ],
            "When": {
                "Relationship:{{Shannon}}": "Dating, Engaged, Married"
            },
        },
        {
            "Action": "EditMap",
            "Target": "Maps/sdvhead.LawAndOrderSV_AboveJail",
            "MapTiles": [
                {
                    "Position": { "X": 19, "Y": 18 },
                    "Layer": "Back",
                    "SetProperties": {"TouchAction":"Sleep"}
                },
                {
                    "Position": { "X": 20, "Y": 18 },
                    "Layer": "Back",
                    "SetProperties": {"TouchAction":"Sleep"}
                },
            ],
            "When": {
                "Relationship:{{Russell}}": "Dating, Engaged, Married"
            },
        },


        //trigger actions
        {
            "Action": "Include",
            "FromFile": "assets/Data/TriggerActions.json"
        },        
        //special orders
        {
            "Action": "Include",
            "FromFile": "assets/Data/SpecialOrders.json"
        },


        {
            "LogName": "Jail is Occupied",
            "Action": "Include",
            "FromFile": "assets/Include/JailOccupied.json",
            "When": {
                "HasConversationTopic |contains={{ModId}}_PrisonBed1, {{ModId}}_PrisonBed2": "true"
            }
        },
        {
            "LogName": "Pierre Jail Updates",
            "Action": "Include",
            "FromFile": "assets/Include/PierreJail.json",
            "When":{
                "cfgJailPierre": true,
                "HasConversationTopic": "{{ModId}}_PierreInJail"
            }
        },
        {
            "Action": "Include",
            "FromFile": "assets/Include/PierreRelease.json",
            "When": {
                "HasConversationTopic |contains={{ModId}}_PierreInJail": false,
                "HasConversationTopic |contains={{ModId}}_JailEnd": true,
            }
        },
        {
            "LogName": "Lewis Jail Setup",
            "Action": "Include",
            "FromFile": "assets/Include/LewisJailable.json",
            "When":{
                "cfgJailLewis": true,
            }
        },
        {
            "LogName": "Lewis in Jail",
            "Action": "Include",
            "FromFile": "assets/Include/LewisInJail.json",
            "When":{
                "cfgJailLewis": true,
                "HasConversationTopic": "{{ModId}}_LewisInJail"
            }
        },
        {
            "LogName": "Clint Jail Setup",
            "Action": "Include",
            "FromFile": "assets/Include/ClintJailable.json",
            "When":{
                "cfgJailClint": true,
            }
        },
        {
            "LogName": "Clint in Jail",
            "Action": "Include",
            "FromFile": "assets/Include/ClintInJail.json",
            "When":{
                "cfgJailClint": true,
                "HasConversationTopic |contains={{ModId}}_ClintInJail, {{ModId}}_ClintRepeatJail": "true"
            }
        },
        {
            "LogName": "Clint House Arrest",
            "Action": "Include",
            "FromFile": "assets/Include/ClintHouseArrest.json",
            "When":{
                "cfgJailClint": true,
                "HasConversationTopic |contains={{ModId}}_ClintHouseArrest": "true"
            }
        },
        {
            "LogName": "Pam Jail Setup",
            "Action": "Include",
            "FromFile": "assets/Include/PamJailable.json",
            "When":{
                "cfgJailPam": true,
            }
        },
        {
            "LogName": "Pam in Jail",
            "Action": "Include",
            "FromFile": "assets/Include/PamInJail.json",
            "When":{
                "cfgJailPam": true,
                "HasConversationTopic |contains={{ModId}}_PamInJail, {{ModId}}_PamRepeatJail": "true"
            }
        },
        {
            "LogName": "Morris Jail Setup",
            "Action": "Include",
            "FromFile": "assets/Include/MorrisJailable.json",
            "When":{
                "cfgJailMorris": true,
            }
        },
        {
            "Action": "Include",
            "FromFile": "assets/Include/ghostwood/ghostwood.json",
        },
        {
            "Action": "Include",
            "FromFile": "assets/Include/ghostwood/Ripley.json",
        },
        {
            "Action": "Include",
            "FromFile": "assets/Include/ghostwood/RipleyRoomie.json",
        },
        {
            "Action": "Include",
            "FromFile": "assets/Include/ghostwood/Spork.json",
        },
        {
            "LogName": "Morris in Jail - Vanilla",
            "Action": "Include",
            "FromFile": "assets/Include/MorrisInJail_Vanilla.json",
            "When":{
                "cfgJailMorris": true,
                "HasMod |contains=FlashShifter.StardewValleyExpandedCP": "false",
                "HasConversationTopic |contains={{ModId}}_MorrisInJail, {{ModId}}_MorrisRepeatJail": "true"
            }
        },
        {
            "LogName": "Morris in Jail - SVE",
            "Action": "Include",
            "FromFile": "assets/Include/MorrisInJail_SVE.json",
            "When":{
                "cfgJailMorris": true,
                "HasMod |contains=FlashShifter.StardewValleyExpandedCP": "true",
                "HasConversationTopic |contains={{ModId}}_MorrisInJail, {{ModId}}_MorrisRepeatJail": "true"
            },
            
        },
        {
            "LogName": "R/S dating conflict event",
            "Action": "Include",
            "FromFile": "assets/Include/ConflictRS.json",
            "When":{
                "cfgJailFarmer":true,
                "cfgConflictRussellShannon": true,
            }
        },
        {
            "LogName": "R/S Cold Shoulder",
            "Action": "Include",
            "FromFile": "assets/Include/ColdShoulder.json",
            "When":{
                "HasConversationTopic": "{{ModId}}_rsColdShoulder"
            }
        },
        {
            "LogName": "Prison Bed 1 in use",
            "Action": "Include",
            "FromFile": "assets/Include/Prisoner1.json",
            "When":{
                "HasConversationTopic |contains={{ModId}}_PrisonBed1": true,
                "HasConversationTopic |contains={{ModId}}_PrisonBed2": false,
            }
        },
        {
            "LogName": "Prison Bed 2 in use",
            "Action": "Include",
            "FromFile": "assets/Include/Prisoner2.json",
            "When":{
                "HasConversationTopic |contains={{ModId}}_PrisonBed1": false,
                "HasConversationTopic |contains={{ModId}}_PrisonBed2": true,
            }
        },
        {
            "LogName": "Both Prison Beds in use",
            "Action": "Include",
            "FromFile": "assets/Include/PrisonFull.json",
            "When":{
                "HasConversationTopic |contains={{ModId}}_PrisonBed1": true,
                "HasConversationTopic |contains={{ModId}}_PrisonBed2": true,
            }
        },
        //show the blanket in Linus' tent after seeing Shannon's 6-heart event. In the winter, show that it is being used
        {
            "Action": "EditMap",
            "Target": "Maps/Tent",
            "FromFile": "assets/Locations/TentBlanket.tmx",
            "ToArea": {
                "X": 1,
                "Y": 3,
                "Width": 1,
                "Height": 1
            },
            "FromArea": {
                "X": 1,
                "Y": 3,
                "Width": 1,
                "Height": 1
            },
            "When": {
                "HasSeenEvent |contains=239790006": true,
                "Season": "Spring, Summer, Fall",
            },
        },
        {
            "Action": "EditMap",
            "Target": "Maps/Tent",
            "FromFile": "assets/Locations/TentBlanket.tmx",
            "ToArea": {
                "X": 4,
                "Y": 3,
                "Width": 1,
                "Height": 2
            },
            "FromArea": {
                "X": 4,
                "Y": 3,
                "Width": 1,
                "Height": 2
            },
            "When": {
                "HasSeenEvent |contains=239790006": true,
                "Season": "Winter",
            },
        },

        {
            //engagement dialogue
            "Action": "EditData",
            "Target": "Data/EngagementDialogue",
            "Entries": {
                "{{Shannon}}0": "{{i18n:engagement.shannon0}}",
                "{{Shannon}}1": "{{i18n:engagement.shannon1}}",
                "{{Russell}}0": "{{i18n:engagement.russell0}}",
                "{{Russell}}1": "{{i18n:engagement.russell1}}",
            }
        },

        {
            "Action": "EditImage",
            "Target": "Characters/Clint",
            "FromFile": "assets/NPCs/Sprites/Clint_Pickaxe.png",
            "ToArea": { "X": 0, "Y": 352, "Width": 64, "Height": 64 }
         },


        //have the jail fireplace on permanently in the winter (daytiles same as nighttiles for the fireplace)
        {
            "Action": "EditMap",
            "Target": "Maps/sdvhead.LawAndOrderSV_Jail",
            "MapProperties": {
                "DayTiles": "Buildings2 2 16 108 Buildings2 3 16 108 Buildings2 2 17 108 Buildings2 3 17 108 Front 3 2 256 Front 3 3 288 Front 11 2 256 Front 11 3 288 Front 16 2 256 Front 16 3 288",
            },
            "When": {
                "Season": "Winter",
            },
        },

        { //Event lookup mod exclusion because people keep posting on my mod page about a bug with this other broken mod
            "Action": "EditData",
            "Target": "Mods/shekurika.EventLookup/blocklist",
            "Entries": {
                "239792003":"T",
                "sdvlao_shrineofjustice":"T",
            },
            "When": {
                "HasMod |contains=shekurika.EventLookup": "true",
            },
        },

      
    ]
}